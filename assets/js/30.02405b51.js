(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{344:function(s,a,t){"use strict";t.r(a);var e=t(7),n=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"子查询"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#子查询"}},[s._v("#")]),s._v(" 子查询")]),s._v(" "),a("p",[s._v("将一个查询语句嵌套在查询语句里的一个查询语句。被嵌套在内的叫子查询（内查询）、外面的叫主查询（外查询）。")]),s._v(" "),a("h3",{attrs:{id:"规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#规范"}},[s._v("#")]),s._v(" 规范")]),s._v(" "),a("ul",[a("li",[s._v("子查询"),a("strong",[s._v("必须")]),s._v("写在括号内；")]),s._v(" "),a("li",[s._v("子查询为了可读性，一般写在操作符的右边；")]),s._v(" "),a("li",[s._v("子查询不支持 "),a("code",[s._v("GROUP BY")]),s._v(" 子句和 "),a("code",[s._v("LIMIT")]),s._v(" 子句；")])]),s._v(" "),a("h3",{attrs:{id:"分类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#分类"}},[s._v("#")]),s._v(" 分类")]),s._v(" "),a("p",[s._v("可分为两类")]),s._v(" "),a("ul",[a("li",[a("p",[a("strong",[s._v("单行子查询")]),s._v("和"),a("strong",[s._v("多行子查询")]),s._v("；")]),s._v(" "),a("p",[s._v("单行子查询的子查询（内查询）返回一条查询结果，多行子查询返回多条查询结果")])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("相关子查询")]),s._v("和"),a("strong",[s._v("非相关子查询")]),s._v("；")]),s._v(" "),a("p",[s._v("非相关子查询的子查询（内查询）的数据是固定的，不会使用到主查询的数据，而相关子查询会使用到主的查询的数据。")])])]),s._v(" "),a("h2",{attrs:{id:"单行子查询"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#单行子查询"}},[s._v("#")]),s._v(" 单行子查询")]),s._v(" "),a("p",[s._v("子查询（内查询）返回一条查询结果。")]),s._v(" "),a("p",[s._v("使用 "),a("code",[s._v("=")]),s._v(" "),a("code",[s._v(">")]),s._v(" "),a("code",[s._v(">=")]),s._v(" "),a("code",[s._v("<")]),s._v(" "),a("code",[s._v("<=")]),s._v(" "),a("code",[s._v("<>")]),s._v(" 操作符")]),s._v(" "),a("p",[a("em",[s._v("查询比平均工资高的员工")])]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("SELECT last_name,salary\nFROM employees\nWHERE salary > (\n\tSELECT AVG(salary)\n\tFROM employees\n);\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h2",{attrs:{id:"多行子查询"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#多行子查询"}},[s._v("#")]),s._v(" 多行子查询")]),s._v(" "),a("p",[s._v("子查询（内查询）返回多条查询结果。")]),s._v(" "),a("p",[s._v("使用 "),a("code",[s._v("IN")]),s._v(" "),a("code",[s._v("ANY")]),s._v(" "),a("code",[s._v("SOME")]),s._v(" "),a("code",[s._v("ALL")]),s._v(" 操作符")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("操作符")]),s._v(" "),a("th",[s._v("含义")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[a("code",[s._v("IN")])]),s._v(" "),a("td",[s._v("等于列表中的任意一个")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("ANY")])]),s._v(" "),a("td",[s._v("需要和单行比较操作符一起使用，和子查询返回的某一个值比较")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("ALL")])]),s._v(" "),a("td",[s._v("需要和单行比较操作符一起使用，和子查询返回的所有值比较")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("SOME")])]),s._v(" "),a("td",[s._v("实际上是 "),a("code",[s._v("ANY")]),s._v(" 的别名，作用相同，一般常使用 "),a("code",[s._v("ANY")])])])])]),s._v(" "),a("p",[a("em",[s._v("查询所在部门大于平均工资的员工")])]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("SELECT last_name,department_id,salary \nFROM employees\nWHERE department_id IN (\n\tSELECT department_id\n\tFROM employees\n\tGROUP BY department_id\n\tHAVING AVG(salary) >(\n\t\tSELECT AVG(salary)\n\t\tFROM employees\n\t)\n);\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("h2",{attrs:{id:"不相关子查询"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#不相关子查询"}},[s._v("#")]),s._v(" 不相关子查询")]),s._v(" "),a("p",[s._v("不依赖于外部查询的数据。")]),s._v(" "),a("p",[a("em",[s._v("上面两个子查询的示例就是")])]),s._v(" "),a("h2",{attrs:{id:"相关子查询"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#相关子查询"}},[s._v("#")]),s._v(" 相关子查询")]),s._v(" "),a("p",[a("em",[s._v("查询工资大于本部门平均工资的员工")])]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("SELECT salary,last_name,department_id\nFROM employees e\nWHERE salary >(\n\tSELECT AVG(d.salary)\n\tFROM employees d\n\tWHERE d.department_id=e.department_id\n);\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h2",{attrs:{id:"其他"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其他"}},[s._v("#")]),s._v(" 其他")]),s._v(" "),a("h3",{attrs:{id:"派生表"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#派生表"}},[s._v("#")]),s._v(" 派生表")]),s._v(" "),a("p",[s._v("当子查询位于 "),a("code",[s._v("FROM")]),s._v(" 子句时，这个子查询称为"),a("strong",[s._v("派生表")]),s._v("，并且派生表必须要有"),a("strong",[s._v("别名")])]),s._v(" "),a("p",[a("em",[s._v("查询在使用的部门的编号小于100的编号")])]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("SELECT t.department_id\nFROM (\n\tSELECT department_id\n\tFROM employees\n\tGROUP BY department_id\n)\tt\nWHERE t.department_id<100; \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h2",{attrs:{id:"参考链接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考链接"}},[s._v("#")]),s._v(" 参考链接")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.sjkjc.com/mysql/subquery/",target:"_blank",rel:"noopener noreferrer"}},[s._v("MySQL 子查询"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://www.cnblogs.com/geaozhang/p/6756825.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("SELECT中常用的子查询操作"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=n.exports}}]);